diff --git a/brian2genn/device.py b/brian2genn/device.py
index c6936e2..82c7876 100644
--- a/brian2genn/device.py
+++ b/brian2genn/device.py
@@ -853,8 +853,8 @@ class GeNNDevice(CPPStandaloneDevice):
                 check_call(cmd, cwd=directory)
             else:
                 # print ["./main", "test", str(self.run_duration), gpu_arg]
-                check_call(["./main", "test", str(self.run_duration), gpu_arg],
-                           cwd=directory)
+                check_call("./main test {} {}".format(str(self.run_duration), gpu_arg),
+                           cwd=directory, shell=True)
         self.has_been_run = True
         last_run_info = open(
             os.path.join(directory, 'results/last_run_info.txt'), 'r').read()
@@ -981,9 +981,11 @@ class GeNNDevice(CPPStandaloneDevice):
                 args = [buildmodel_cmd, 'magicnetwork_model.cpp']
                 if not use_GPU:
                     args += ['-c']
-                check_call(args, cwd=directory, env=env)
+                args = ['PATH=~/defapps/genn:$PATH'] + args
+                args_str = ' '.join(args)
+                check_call(args_str, cwd=directory, env=env, shell=True)
                 call(["make", "clean"], cwd=directory, env=env)
-                check_call(["make"], cwd=directory, env=env)
+                check_call("PATH=~/defapps/genn/:$PATH make -j", cwd=directory, env=env, shell=True)
 
     def add_parameter(self, model, varname, variable):
         model.parameters.append(varname)
